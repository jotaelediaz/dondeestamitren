@font-face {
    font-family: 'Sora';
    src: url("/static/fonts/Sora-VariableFont_wght.ttf");
    font-weight: 100 900;
    font-stretch: 75% 125%;
    font-style: normal;
}

@font-face {
    font-family: 'Rubik';
    src: url("/static/fonts/Rubik-VariableFont_wght.ttf");
    font-weight: 100 900;
    font-stretch: 75% 125%;
    font-style: normal;
}

@font-face {
    font-family: "Material Symbols Rounded";
    src: url("/static/fonts/MaterialSymbolsRoundedVF.ttf");
    font-weight: 100 700;
    font-style: normal;
}

/* -- Colors and vars -- */

:root{

    --app-margin: 15px;
    --topbar-height: 35px;
    --bottom-nav-height: 60px;

    --vt-ease: cubic-bezier(.2,0,.2,1);
    --vt-in: 220ms;
    --vt-out: 180ms;

    --jotaele-dark: #2a3b9b;
    --jotaele-teal: #18aed7;
    --jotaele-black: #33383c;
    --jotaele-white: #fff;
    --jotaele-background: #e4f0f4;
    --jotaele-background-accent: #d3e4f3;
    --jotaele-text-grey: #6c757d;
    --jotaele-text-grey-hover: #9ea4a9;
    --jotaele-button-grey: #7a99b4;
    --jotaele-button-grey-hover: #5a7e9e;
    --jotaele-midnight: #001c38;
    --jotaele-main-hover: #105365;
}

html,
body {
    padding: 0;
    margin: 0;
    font-family: Rubik, sans-serif;
    font-weight: 300;
    overflow: hidden;
    background: var(--jotaele-background);
    color: var(--jotaele-black);
}

h1, h2, h3, h4, h5, h6 {
    font-family: Sora, sans-serif;
    font-weight: 700;
    color: var(--jotaele-black);
}

a {
    text-decoration: none;
    color: var(--jotaele-black);
}

p {
    font-family: Rubik, sans-serif;
    font-weight: 300;
    color: var(--jotaele-black);
    line-height: 1.3em;
    font-size: 1.2rem;
}

.material-symbols-rounded {
    font-family: "Material Symbols Rounded", sans-serif;
    font-weight: 400;
    font-style: normal;
    letter-spacing: normal;
    text-transform: none;
    display: inline-block;
    white-space: nowrap;
    word-wrap: normal;
    font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
}

.app-block-padding {
    padding-left: var(--app-margin);
    padding-right: var(--app-margin);
    box-sizing: border-box;
}

.app-block-vertical-padding {
    padding-top: var(--app-margin);
    box-sizing: border-box;
}

.app-block-navbar-padding {
    padding-bottom: calc(var(--bottom-nav-height) + (var(--app-margin) * 1.5)) !important;
}

main {
    display: flex;
    flex-direction: column;
    height: 100svh;
    min-height: 0;
}

/* -- Topbar navbar -- */

#app-topbar {
    position: relative;
    display: flex;
    width: 100%;
    padding: var(--app-margin);
    z-index: 999;
    box-sizing: border-box;
    background: var(--jotaele-background);
}

#app-topbar .topbar-inner {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    width: 100%;
    height: var(--topbar-height);
    max-height: var(--topbar-height);
    align-items: center;
}

.topbar-btn {
    display: flex;
    flex: 0 0 auto;
    align-items: center;
    justify-content: center;
    width: var(--topbar-height);
    height: var(--topbar-height);
    background: var(--jotaele-white);
    border: 0;
    border-radius: 100%;
    color: var(--jotaele-black);
    text-decoration: none;
    transition: ease 0.3s;
    font-size: 1.5rem;
}

.topbar-btn.nude-icon {
    background: none;
    font-size: 2rem;
}

.topbar-btn:hover,
.topbar-btn:active {
    background: var(--jotaele-teal);
    color: var(--jotaele-white);
}

.topbar-btn.disabled,
.topbar-title.disabled {
    pointer-events: none;
    opacity: 0;
}

#app-topbar .topbar-title {
    width: 100%;
    height: var(--topbar-height);
    display: flex; calc(var(--app-margin) / 1);
    justify-content: center;
    align-items: center;
}

#app-topbar .topbar-title img {
    height: calc(var(--topbar-height) * 0.8);
    width: auto;
}

.subsection-topbar {
    flex: 0 0 auto;
    padding-bottom: var(--app-margin);
    border-bottom: 1px solid var(--jotaele-background-accent);
}

/* -- Bottom navbar -- */

#bottom-nav {
    position: fixed;
    padding: var(--app-margin) var(--app-margin) calc(var(--app-margin) / 1.5);
    left: 0;
    bottom: 0;
    z-index: 999;
    display: block;
    width: 100%;
    box-sizing: border-box;
    background: linear-gradient(
        to bottom, transparent,
        color-mix(in srgb, var(--jotaele-background) 50%, transparent),
        var(--jotaele-background)
    );
}

#bottom-nav .nav-inner {
    display: flex;
    width: 100%;
    height: var(--bottom-nav-height);
    max-height: var(--bottom-nav-height);
    background: var(--jotaele-white);
    border-radius: 99px;
    background: rgba(255,255,255,0.8);
    -webkit-backdrop-filter: blur(8px);
    backdrop-filter: blur(8px);
}

#bottom-nav .navbar-inner-wrapper {
    display: flex;
    width: 100%;
    min-width: 0;
    padding: calc(var(--app-margin) / 2);
}

#bottom-nav .navbar-item {
    font-family: Sora, sans-serif;
    text-decoration: none;
    color: var(--jotaele-black);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex: 1 1 0;
    min-width: 0;
    border-radius: 999px;
    font-size: 0.9rem;
    transition: ease 0.3s;
}

#bottom-nav .navbar-item i {
    font-size: 21px;
}

#bottom-nav .navbar-item:not(.item-active):hover,
#bottom-nav .navbar-item:not(.item-active):active {
    color: var(--jotaele-teal);
}

#bottom-nav .navbar-item.item-active {
    background: var(--jotaele-teal);
    color: var(--jotaele-white);
    font-weight: 600;
}

/* -- Transitions -- */

#main {
    view-transition-name: page;
}

@keyframes vt-fade-in   { from { opacity: 0 } to { opacity: 1 } }
@keyframes vt-fade-out  { from { opacity: 1 } to { opacity: 0 } }
@keyframes vt-slide-in  { from { transform: translateX(8px) } to { transform: none } }
@keyframes vt-slide-out { from { transform: none } to { transform: translateY(-8px) } }

::view-transition-new(page) {
    animation: vt-fade-in var(--vt-in) var(--vt-ease) both,
    vt-slide-in var(--vt-in) var(--vt-ease) both;
}
::view-transition-old(page) {
    animation: vt-fade-out var(--vt-out) var(--vt-ease) both,
    vt-slide-out var(--vt-out) var(--vt-ease) both;
}

#app-topbar   { view-transition-name: topbar; }
#bottom-nav   { view-transition-name: bottomnav; }

/* -- Home -- */

#app-topbar.topbar-home {
    background: var(--jotaele-dark);
}

#app-topbar.topbar-home .topbar-btn.nude-icon {
    color: white;
}

#hero-home {
    display: flex;
    flex-direction: column;
    padding: 0 calc(var(--app-margin) * 1) calc(var(--app-margin) * 1.5);
    background: var(--jotaele-dark);
}

.hero-home-header {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    width: 100%;
    box-sizing: border-box;
}

.hero-logo {
    display: flex;
    width: 70%;
    max-width: 320px;
    margin-bottom: calc(var(--app-margin) * 1.5);
}

.hero-logo img {
    width: 100%;
    height: auto;
}

.main-content {
    flex: 1 1 100%;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

.welcome-message {
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
    justify-content: center;
    flex-direction: column;
}

.welcome-message .txt-title {
    font-size: 1.8rem;
    font-weight: 600;
    font-family: Sora, sans-serif;
    color: var(--jotaele-dark);
}

.welcome-message-title {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
}

.by-jotaele {
    background: var(--jotaele-background-accent);
    padding: 0.5rem 0.8rem;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    font-size: 0.8rem;
    gap: 0.1rem;
}

.by-jotaele a {
    display: flex;
    flex-direction: column;
    gap: 0.1rem;
}

/* -- Station search box -- */

.search-station-box {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    width: 100%;
    box-sizing: border-box;
    gap: var(--app-margin);
}

.search-box-wrapper {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    background: var(--jotaele-white);
    font-family: 'Rubik', sans-serif;
    border-radius: 10px;
    height: 1.7rem;
    min-width: 0;
    width: 100%;
    padding: calc(var(--app-margin) / 1.5);
}

.search-box-wrapper .search-input {
    background: none;
    border: none;
    outline: none;
    border-radius: 0;
    padding: 0 0;
    margin: 0 0;
    font-size: 1.2rem;
    flex: 1 1 80%;
    box-shadow: none;
    font-family: 'Rubik', sans-serif;
    color: var(--jotaele-black);
}

.search-box-wrapper .search-input:focus,
.search-box-wrapper .search-input:focus-visible {
    outline: none;
}

.search-box-wrapper .search-btn {
    display: flex;
    flex: 0 0 auto;
    align-items: center;
    justify-content: center;
    height: 2.5rem;
    background: none;
    border: 0;
    border-radius: 0;
    box-shadow: none;
    font-size: 1.5rem;
    color: var(--jotaele-black);
    transition: ease 0.3s;
    padding: 0;
}

.search-station-box .nearby-btn {
    display: flex;
    flex: 0 0 auto;
    line-height: normal;
    align-items: center;
    justify-content: center;
    height: 2.5rem;
    width: 2.5rem;
    background: var(--jotaele-button-grey);
    border: 0;
    border-radius: 100%;
    box-shadow: none;
    font-size: 1.6rem;
    color: var(--jotaele-white);
    transition: ease 0.3s;
    padding: 0;
}

.search-box-wrapper .nearby-btn:hover,
.search-box-wrapper .nearby-btn:active {
    background: var(--jotaele-button-grey-hover);
}

.nuclei-picker {
    background: var(--jotaele-background-accent);
    padding: var(--app-margin);
    margin-bottom: var(--app-margin);
    border-radius: 15px;
    position: relative;
}

.nuclei-picker .current-nuclei {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    box-sizing: border-box;
}

.nuclei-picker .current-nuclei .current-nucleus-label,
.nuclei-picker .current-nuclei .current-nucleus-label strong {
    font-size: 1.1rem;
    color: var(--jotaele-black);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.nucleus-menu {
    position: absolute;
    z-index: 70;
    right: 0;
    bottom: 0;
    margin-top: .5rem;
    min-width: 260px;
    max-height: 60vh;
    overflow: auto;
    background: var(--jotaele-white);
    border-radius: 15px;
    box-shadow: 1px 1px 4px #0000003b;
    padding: .5rem;
    animation: np-fade-in .14s ease-out;
}

@keyframes np-fade-in { from { opacity: 0; transform: translateY(-4px); } }

.nucleus-search {
    padding: .25rem .25rem .5rem;
}

.nucleus-search input[type="search"] {
    width: 100%;
    padding: .55rem .7rem;
    border: 1px solid rgba(0,0,0,.12);
    border-radius: 9px;
    background: var(--jotaele-white);
    color: var(--jotaele-black);
    font-size: 1.1rem;
    font-family: 'Rubik', sans-serif;
    transition: border-color .15s ease, box-shadow .15s ease;
}

.nucleus-search input[type="search"]:focus {
    outline: none;
    border-color: color-mix(in srgb, var(--jotaele-background-accent) 55%, #000 0%);
}

.nucleus-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 2px;
}

.nucleus-item {
    width: 100%;
    text-align: left;
    padding: .6rem .7rem;
    border-radius: 10px;
    border: 0;
    background: transparent;
    color: var(--jotaele-black);
    font-size: 1.1rem;
    font-family: 'Rubik', sans-serif;
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    transition: background .12s ease, transform .06s ease, color .12s ease;
}

.nucleus-name {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.nucleus-actions {
    margin-top: .5rem;
    padding-top: .5rem;
    border-top: 1px solid rgba(0,0,0,.06);
    display: flex;
    justify-content: flex-end;
    gap: .5rem;
}

.nucleus-actions .link-like {
    background: none;
    border: 0;
    color: var(--jotaele-black);
    padding: .35rem .55rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background .12s ease, transform .06s ease;
}

.nucleus-dropdown > summary {
    list-style: none;
    content: "";
    display: flex;
    align-items: center;
}

/* -- Stations list -- */

.app-main-content {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    min-height: 0;
    overflow: hidden;
}

ul.chip-list {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    gap: var(--app-margin);
    list-style: none;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
    margin: 0 0;
    padding: 0 0 calc(var(--bottom-nav-height) + (var(--app-margin) * 1.5));
    contain: paint;
}

.chip-card {
    background: var(--jotaele-white);
    border-radius: 15px;
    display: flex;
    align-items: center;
    box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.04);
}

.chip-card:hover,
.chip-card:active {
    background: var(--jotaele-background-accent);
}

.chip-card .chip-link {
    display: flex;
    width: 100%;
    padding: var(--app-margin);
    min-height: 4rem;
    min-width: 0;
}

.chip-card .chip-main {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    flex: 1 1 auto;
    gap: calc(var(--app-margin) / 1);
    min-width: 0;
}

.chip-card .chip-icon {
    width: 40px;
    height: 40px;
    border-radius: 100%;
    flex: 0 0 40px;
    background: var(--jotaele-button-grey);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    line-height: 1em;
    color: var(--jotaele-white);
}

.chip-card .chip-content {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    gap: calc(var(--app-margin) / 3);
    min-width: 0;
}

.chip-card .chip-name {
    font-family: Sora, sans-serif;
    font-weight: 700;
    color: var(--jotaele-black);
    font-size: 1.1rem;
    line-height: 1.15em;
    margin: 0 0;
    padding: 0 0;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.chip-card .station-chip-more {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    font-size: 1.4rem;
    color: var(--jotaele-dark);
}

.chip-card .chip-subtitle {
    display: flex;
    font-family: 'Rubik', sans-serif;
    font-size: 1rem;
    color: var(--jotaele-text-grey);
    margin: 0 0;
    padding: 0 0;
    gap: calc(var(--app-margin) / 3);
}

.station-card .station-meta .station-badge {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.2rem;
}

.station-card .station-meta .station-badge img {
    display: flex;
    height: 1rem;
    width: auto;
}

/* -- Lines list -- */

.line-chip-icon.generic-chip-icon {
    background: var(--line-color, var(--jotaele-button-grey))
}

.line-chip-icon.image-line-icon {
    display: flex;
    flex: 0 0 3.5rem;
    position: relative;
}

.line-chip-icon.image-line-icon img {
    display: block;
    height: 100%;
    width: auto;
}

.line-card .line-name {
    display: flex;
    flex-direction: column;
    min-width: 0;
    margin: 0 0;
    font-size: 1.1rem;
}

.line-card .line-name .line-terminal-name {
    flex: 0 1 auto;
    width: 100%;
    max-width: 100%;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
}

.grouped-lists-scroll {
    display: block;
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
    padding-bottom: calc(var(--bottom-nav-height) + (var(--app-margin) * 1.5));
    scroll-behavior: smooth;
}

.sticky-title {
    position: sticky;
    top: 0;
    z-index: 5;
    background: var(--jotaele-background);
    border-bottom: 1px solid var(--jotaele-background-accent);
}

.sticky-title .app-block-title {
    margin: 0 0;
    padding: var(--app-margin) 0;
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    gap: var(--app-margin);
}

.app-block-title .title-badge {
    height: 1.5rem;
    display: inline-block;
}

.app-block-title .title-badge img {
    height: 100%;
    width: auto;
    display: inline-block;
}

.grouped-chip-list {
    flex: 0 0 auto;
    overflow: visible;
    margin: 0 0 var(--app-margin) 0;
    padding: 0 0 0 0;
    gap: var(--app-margin);
}

.grouped-chip-list + .sticky-title {
    margin-top: calc(var(--app-margin) * 1.25);
}

.grouped-lists-scroll .chip-list {
    flex: none;
    min-height: 0;
    overflow: visible;
    margin: 0 0 var(--app-margin) 0;
    padding: 0;
    gap: var(--app-margin);
}

/* -- Config menu -- */

.sheet {
    width: auto;
    max-width: none;
    height: 100dvh;
    margin: 0;
    padding: 0;
    border: none;
    background: transparent;
    inset: 0;
    z-index: 1001;
}

.sheet::backdrop {
    background: rgba(0,0,0,.25);
    opacity: 0;
    transition: opacity 180ms var(--vt-ease);
}

.sheet[open]::backdrop { opacity: 1; }

.sheet-panel {
    position: fixed;
    top: 0;
    right: 0;
    width: min(420px, 92vw);
    height: 100dvh;
    background: var(--jotaele-white);
    box-shadow: -10px 0 30px rgba(0,0,0,.15);
    border-radius: 16px 0 0 16px;
    display: flex;
    flex-direction: column;
    transform: translateX(100%);
    transition: transform 220ms var(--vt-ease);
}

.sheet[open] .sheet-panel { transform: translateX(0); }

.sheet-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: calc(var(--app-margin) * 1.2);
    border-bottom: 1px solid var(--jotaele-background-accent);
}

.sheet-header h2 {
    font-family: Sora, sans-serif;
    font-size: 1.2rem;
    margin: 0;
}

.sheet-close {
    background: none;
    border: 0;
    width: 40px; height: 40px;
    display: grid; place-items: center;
    border-radius: 999px;
}

.sheet-nav {
    display: flex;
    flex-direction: column;
    padding: var(--app-margin);
    gap: 4px;
    overflow: auto;
}

.sheet-item {
    display: grid;
    grid-template-columns: 28px 1fr;
    align-items: center;
    gap: .75rem;
    padding: .7rem .9rem;
    border-radius: 12px;
    text-decoration: none;
    color: var(--jotaele-black);
    background: transparent;
    border: 0;
    text-align: left;
    font: inherit;
    cursor: pointer;
}

.sheet-item i { font-size: 22px; }

.sheet-item:hover,
.sheet-item:active {
    background: color-mix(in srgb, var(--jotaele-background-accent) 55%, white 45%);
}

/* - Route Maps - */

.grid-route-map {
    --number-of-stations: 10;
    --line-route-width: 10px;
    --icon-dot-size: 20px;
    --icon-border-dot-size: 4px;
    --line-color: var(--jotaele-dark);

    display: grid;
    width: 100%;
    max-width: 100%;
    height: 100%;
    grid-template-columns: auto minmax(0, 1fr) auto;
    grid-template-rows: repeat(var(--number-of-stations), 1fr);
    grid-column-gap: calc(var(--app-margin) * 0.5);
    grid-auto-flow: row dense;
    box-sizing: border-box;
    padding: 0 0;
    margin: 0 0;
}

.station-block,
.grid-route-map-station {
    display: contents;
}

.grid-route-map .route-line-wrapper {
    display: flex;
    height: 100%;
    width: var(--icon-dot-size);
    position: relative;
    align-items: flex-start;
    justify-content: center;
}

.grid-route-map .route-line-fragment {
    display: block;
    position: absolute;
    width: var(--line-route-width);
    height: calc(100% + 1px);
    background: var(--line-color);
}

.grid-route-map .route-dot {
    position: absolute;
    content: "";
    display: block;
    border-radius: 100%;
    z-index: 2;
    width: var(--icon-dot-size);
    height: var(--icon-dot-size);
    background: var(--jotaele-white);
    border: var(--icon-border-dot-size) solid var(--line-color);
    box-sizing: border-box;
}

.grid-route-map .grid-route-station-info {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}

.grid-route-map .grid-route-station-name {
    font-family: Sora, sans-serif;
    font-weight: 700;
    color: var(--jotaele-black);
    font-size: 1.2rem;
    line-height: 1.1em;
}