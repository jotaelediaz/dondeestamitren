{%- extends "base-layout.html" %}
{%- block app_content %}
	
	<div class="subsection-topbar">
		<search id="stations-search" class="app-block-padding app-block-vertical-padding">
			{# TODO FILTRO DE LINEAS #}
		</search>
	</div>
	
	<section id="line-list" class="line-list app-block-padding app-main-content" aria-label="Listado de líneas {{ 'de ' + nucleus.name if nucleus }}">
		
		{% if not lines %}
			<div class="app-block-padding" style="opacity:.7;padding-top:1rem">
				<p>No hay líneas que coincidan con los criterios introducidos.</p>
			</div>
		{% else %}
			<ul class="station-list-ul chip-list">
				{% for ln in lines | natural_sort('short_name') %}
					{% set lid = ln.line_id or ln.id %}
					{% set canon_route = ln.canonical_route %}
					{% set href = '/routes/' ~ (ln.nucleus_id or '')|lower ~ '/' ~ canon_route.route_id if canon_route else '/lines/' ~ (ln.nucleus_id or '')|lower ~ '/' ~ lid %}
					{% set origin_name, destination_name = canon_route.terminals_names if canon_route else (None, None) %}
					
					<li class="line-card chip-card" style="--line-color: {{ ln.color_bg }};">
						<a class="line-link chip-link" href="{{ href }}">
							<div class="line-main chip-main">
								<div class="line-chip-icon chip-icon">
									<i class="material-symbols-rounded" aria-hidden="true">directions_subway</i>
								</div>
								<div class="line-chip-content chip-content">
									<h3 class="line-name">
										<span class="line-origin-station line-terminal-name">{{ origin_name }}</span>
										<span class="line-destination-station line-terminal-name">{{ destination_name }}</span>
									</h3>
								</div>
								<div class="station-chip-more chip-more">
									<i class="material-symbols-rounded" aria-hidden="true">keyboard_arrow_right</i>
								</div>
							</div>
						</a>
					</li>
				{% endfor %}

			</ul>
		{% endif %}
	</section>
{%- endblock %}